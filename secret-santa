<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to right, #ff9a9e, #fad0c4);
            font-family: Arial, sans-serif;
        }
        .container {
            margin-top: 50px;
        }
        .card {
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card p-4">
            <h2 class="text-center">Secret Santa ðŸŽ…</h2>
            <div id="inputSection" class="text-center">
                <p class="lead">Enter your name to reveal your Secret Santa assignment.</p>
                <input type="text" id="nameInput" class="form-control mb-3" placeholder="Enter your name" />
                <button id="revealButton" class="btn btn-primary">Reveal Assignment</button>
            </div>
            <div id="resultSection" class="mt-4 text-center" style="display: none;">
                <h4 id="assignmentResult" class="text-success"></h4>
                <p class="text-muted">Your result is stored in localStorage. You cannot see it again!</p>
            </div>
        </div>
    </div>

    <script>
        // Base64 Encoded data (assignments + codebook combined)
        const encodedData = "eyJBMSI6IkdpZnQgdG8gQzMsIEoxMCwgSzExIiwiQjIiOiJHaWZ0IHRvIEU1LCBJOSIsIkMzIjoiR2lmdCB0byBGNiwgSDgiLCJENCIsIkdpZnQgdG8gRzcsIEwxMiIsIkU1IjoiR2lmdCB0byBCMiwgSjEwIiwiRjYiOiJHaWZ0IHRvIEExLCBLMTEiLCJHNzoiR2lmdCB0byBENCwgTDEyIiwiSDgiOiJHaWZ0IHRvIEk5IiwiSTkiOiJHaWZ0IHRvIEg4IiwiY29kZWJvb2siOnsiTWVudG9yIjoiQTEiLCJNYW1pIjoiQjIiLCJEaXRhIjoiQzMiLCJBcm1lbmQiOiJENCIsIkZhdGltZSI6IkU1IiwiRG9uYSI6IkY2IiwiRGV4YSI6Ikc3IiwiT2xpIjoiSDgiLCJFdG5hIjoiSTkiLCJKaWxsZSI6IkoxMCIsIlZlcmEiOiJLMTEiLCJCZW5pIjoiTDEyIn19";

        // Decode Base64
        const decodedData = JSON.parse(atob(encodedData));
        const { codebook, ...assignments } = decodedData;

        document.getElementById("revealButton").addEventListener("click", function () {
            const name = document.getElementById("nameInput").value.trim();
            if (!name) {
                alert("Please enter your name.");
                return;
            }

            const code = codebook[name];
            if (!code) {
                alert("Your name is not recognized in this Secret Santa game.");
                return;
            }

            // Check if already retrieved
            const localStorageKey = "secretSantaBanesa3";
            const usedNames = JSON.parse(localStorage.getItem(localStorageKey)) || [];
            if (usedNames.includes(name)) {
                alert("You have already viewed your assignment!");
                return;
            }

            // Store name in localStorage
            usedNames.push(name);
            localStorage.setItem(localStorageKey, JSON.stringify(usedNames));

            // Show the assignment
            const assignment = assignments[code];
            document.getElementById("assignmentResult").innerText = assignment;
            document.getElementById("inputSection").style.display = "none";
            document.getElementById("resultSection").style.display = "block";
        });
    </script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
